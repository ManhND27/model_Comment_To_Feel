var admDomain,oldQueue,cpabd_param;String.prototype.matchAll=function(e){var a=[];return this.replace(e,function(){var e=[].slice.call(arguments,0),t=e.splice(-2);e.index=t[0],e.input=t[1],a.push(e)}),a.length?a:null},window.admicro_cpa_q&&!(window.admicro_cpa_q instanceof Array)&&window.admicro_cpa_f||(admDomain="//static.contineljs.com/cpa",oldQueue=window.admicro_cpa_q||[],cpabd_param=cpabd_param||[],window.admicro_cpa_q=function(){var a,J={site:"default",jsFile:admDomain+"/tp2.js?t="+(new Date).getTime(),bodyReady:!1,domReady:!1,queue:[]},W={},e=function(){J.site=document.location.host,J.site=J.site.replace(/www./gi,"");for(var e=[],t=J.queue,a=0;a<t.length;++a){var r=t[a];r&&"[object Object]"===r.toString()&&X(r,a,t,e)}(t=document.createElement("script")).setAttribute("async","true"),t.setAttribute("type","text/javascript"),t.setAttribute("src",J.jsFile),X({event:"appendJs",element:t})},X=function(t,e,a,r){if("object"==typeof t&&0<t.length){for(var n=0;n<t.length;n++)X(t[n]);return!0}switch(t.event=t.event.toLowerCase(),t.event){case"onclick":for(var i=J.queue,_=[],n=0,d=i.length;n<d;n++)switch(i[n].event){case"actions":for(var o in i[n].ids)void 0!==i[n].ids[o].onClick&&0!=i[n].ids[o].onClick&&_.push(i[n].ids[o])}if(0==_.length)return!1;function c(e){for(var t=e.target,a=e.target.parentNode,r=e.target.parentNode.parentNode,n=0,i=_.length;n<i;n++){var d,o,c,u=_[n].className,l=_[n].id,s=_[n].value,v=void 0!==_[n].order&&1==_[n].order,m=void 0!==_[n].auto&&1==_[n].auto?1:0,g=void 0!==_[n].rtg_id?_[n].auto.rtg_id:null;if(void 0!==u){var p=t.getAttribute("class"),b=a.getAttribute("class"),A=r.getAttribute("class");if(null!=p&&0<=p.indexOf(u)||null!=b&&0<=b.indexOf(u)||null!=A&&0<=A.indexOf(u)){admq({event:"setSuccess",value:1});try{admq(1==v?{event:"setValue",value:s,targets:[t,a,r]}:{event:"setValue",value:s,order:"",targets:[t,a,r]})}catch(e){}admq({event:"start",auto:m,rtg_id:g})}}else{void 0!==l&&(d=t.getAttribute("id"),o=a.getAttribute("id"),c=a.getAttribute("id"),(null!=d&&d==l||null!=o&&o==l||null!=c&&c==l)&&(admq({event:"setSuccess",value:1}),admq(1==v?{event:"setValue",value:s,targets:[t,a,r]}:{event:"setValue",value:s,order:"",targets:[t,a,r]}),admq({event:"start",auto:m,rtg_id:g})))}}}void 0!==document.body&&document.body.addEventListener("click",c);try{parent.document.body.addEventListener("click",c)}catch(e){}break;case"forms":var u=void 0!==t.ids?t.ids:null,l=null,s=[],v=[],m=[];if(null!=u)for(var n=0,g=u.length;n<g;n++){var p=void 0!==u[n].auto&&0==u[n].auto?0:1,b=void 0!==u[n].value?u[n].value:"",A=void 0!==u[n].order&&1==u[n].order;if(action=void 0!==u[n].action?u[n].action:null,void 0!==u[n].trackingId&&X({event:"setTrackingId",id:u[n].trackingId}),null!=(l=void 0!==u[n].id?u[n].id:null)){s[l]=b,m[l]=A,v[l]=p;var h=document.forms[l];if(null==h&&parent.document&&(h=parent.document.forms[l]),null!=h&&(h.setAttribute("admicro-data-event",b),h.setAttribute("admicro-data-auto",p),h.setAttribute("admicro-data-order",A)),null!=h&&null!=action){var f,y=void 0!==action.tagName?h.getElementsByTagName(action.tagName):h.getElementsByClassName(action.className),E=void 0===action.type?"submit":action.type,k=null;for(f in y)if(y[f].type==E){k=y[f];break}if(null==(k=null==k&&void 0!==y[action.index]?y[action.index]:k))continue;k.setAttribute("admicro-data-event",b),k.setAttribute("admicro-data-auto",p),k.setAttribute("admicro-data-order",A),k.addEventListener?k.addEventListener("click",function(){X({event:"setSuccess",value:1}),X("true"==this.getAttribute("admicro-data-order")?{event:"setValue",value:this.getAttribute("admicro-data-event")}:{event:"setValue",value:this.getAttribute("admicro-data-event"),order:""}),X({event:"start",auto:this.getAttribute("admicro-data-auto")})},!1):k.attachEvent&&k.attachEvent("onclick",function(){X({event:"setSuccess",value:1}),X("true"==this.getAttribute("admicro-data-order")?{event:"setValue",value:this.getAttribute("admicro-data-event")}:{event:"setValue",value:this.getAttribute("admicro-data-event"),order:""}),X({event:"start",auto:this.getAttribute("admicro-data-auto")})})}else null!=h&&h.addEventListener?h.addEventListener("submit",function(){X({event:"setSuccess",value:1}),X("true"==this.getAttribute("admicro-data-order")?{event:"setValue",value:this.getAttribute("admicro-data-event")}:{event:"setValue",value:this.getAttribute("admicro-data-event"),order:""}),X({event:"start",auto:this.getAttribute("admicro-data-auto")})},!1):null!=h&&h.attachEvent&&h.attachEvent("onsubmit",function(){X({event:"setSuccess",value:1}),X("true"==this.getAttribute("admicro-data-order")?{event:"setValue",value:this.getAttribute("admicro-data-event")}:{event:"setValue",value:this.getAttribute("admicro-data-event"),order:""}),X({event:"start",auto:this.getAttribute("admicro-data-auto")})})}}break;case"actions":var w=void 0!==t.ids?t.ids:null,l=null,s=[],v=[],m=[],V=[];if(null!=w)for(n=0,g=w.length;n<g;n++){if(p=void 0!==w[n].auto&&0==w[n].auto?0:1,N=void 0!==w[n].rtg_id?w[n].rtg_id:null,b=void 0!==w[n].value?"function"==typeof w[n].value?"GET_VALUE":w[n].value:"",A=void 0!==w[n].order&&1==w[n].order,h=null,void 0!==w[n].trackingId&&X({event:"setTrackingId",id:w[n].trackingId}),void 0!==w[n].visit&&0<w[n].visit.length){var T=w[n].visit,C=!1;for(o=0,console.log("path:",document.location.pathname);o<T.length;o++){var L=document.location.pathname;if(L=void 0!==T[o].type&&1==T[o].type?document.location.href:L.split("?")[0].toString(),console.log("user path:",L),console.log("check path:",L==T[o].path),void 0!==T[o].historyChange&&1==T[o].historyChange)C=!0;else if(0==T[o].regex&&L==T[o].path||1==T[o].regex&&1==T[o].path.test(L))return X([{event:"setSuccess",value:1},1==A?{event:"setValue",value:void 0!==w[n].value?"function"==typeof w[n].value?w[n].value():w[n].value:""}:{event:"setValue",value:void 0!==w[n].value?"function"==typeof w[n].value?w[n].value():w[n].value:"",order:""},{event:"start",auto:p,rtg_id:N}])}1==C&&function(i,d){function t(e,t,a){for(var r=0;r<o.length;r++){var n=document.location.pathname,n=void 0!==o[r].type&&1==o[r].type?document.location.href:n.split("?")[0];if(0==o[r].regex&&n==o[r].path||1==o[r].regex&&1==o[r].path.test(n))return X([{event:"setSuccess",value:1},1==i.order?{event:"setValue",value:void 0!==i.value?"function"==typeof i.value?i.value():i.value:""}:{event:"setValue",value:void 0!==i.value?"function"==typeof i.value?i.value():i.value:"",order:""},{event:"start",auto:p,rtg_id:d}])}}var o=i.visit,e=window.history.replaceState,a=window.history.pushState;window.history.replaceState=function(){e.apply(window.history,arguments),t()},window.history.pushState=function(){a.apply(window.history,arguments),t()},window.onpopstate=function(e){t()}}(w[n],N)}if(null==(l=void 0!==w[n].id?w[n].id:null)||void 0!==w[n].onClick&&0!=w[n].onClick)if(null==(className=void 0!==w[n].className?w[n].className:null)||void 0!==w[n].onClick&&0!=w[n].onClick){if(null!=(query=void 0!==w[n].query?w[n].query:null)&&(void 0===w[n].onClick||0==w[n].onClick)){q=void 0!==w[n].pos?w[n].pos:0;if(0==(S=document.querySelectorAll(query)).length)try{parent.document&&(S=parent.document.querySelectorAll(query))}catch(e){}for(o=0;o<S.length;o++){function c(e){try{if(null==(e=e.target).getAttribute("admicro-data-event")&&(e=e.parentNode),null==e.getAttribute("admicro-data-event"))return!1;X({event:"setSuccess",value:1}),X("true"==e.getAttribute("admicro-data-order")?{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event")}:{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event"),order:""}),X({event:"start",auto:e.getAttribute("admicro-data-auto"),rtg_id:N})}catch(e){console.log("ADM:",e)}return!0}function c(e){try{e=e.target;X({event:"setSuccess",value:1}),X("true"==e.getAttribute("admicro-data-order")?{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event")}:{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event"),order:""}),X({event:"start",auto:e.getAttribute("admicro-data-auto"),rtg_id:N})}catch(e){console.log("ADM:",e)}return!0}if(!1!==q&&q!==o||(h=S[o]),null!=h&&(h.setAttribute("admicro-data-event",encodeURIComponent(b)),h.setAttribute("admicro-data-auto",p),h.setAttribute("admicro-data-order",A),"GET_VALUE"==b&&(h.getAdmValue=w[n].value)),null!=h&&h.addEventListener?(h.removeEventListener("click",c),h.addEventListener("click",c,!1)):null!=h&&h.attachEvent&&(h.detachEvent("onclick",c),h.attachEvent("onclick",c)),!1!==q&&q===o)break}}}else{var S,q=void 0!==w[n].pos?w[n].pos:0,N=void 0!==w[n].rtg_id?w[n].rtg_id:null;if(0==(S=document.getElementsByClassName(className)).length)try{parent.document&&(S=parent.document.getElementsByClassName(className))}catch(e){}for(var o=0;o<S.length;o++){function c(e){try{e=e.target;X({event:"setSuccess",value:1}),X("true"==e.getAttribute("admicro-data-order")?{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event")}:{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event"),order:""}),X({event:"start",auto:e.getAttribute("admicro-data-auto"),rtg_id:N})}catch(e){console.log("ADM:",e)}return!0}function c(e){try{e=e.target;X({event:"setSuccess",value:1}),X("true"==e.getAttribute("admicro-data-order")?{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event")}:{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event"),order:""}),X({event:"start",auto:e.getAttribute("admicro-data-auto"),rtg_id:N})}catch(e){console.log("ADM:",e)}return!0}if(!1!==q&&q!==o||(h=S[o]),null!=h&&("GET_VALUE"==b&&(h.getAdmValue=w[n].value),h.setAttribute("admicro-data-event",encodeURIComponent(b)),h.setAttribute("admicro-data-auto",p),h.setAttribute("admicro-data-order",A)),null!=h&&h.addEventListener?(h.removeEventListener("click",c),h.addEventListener("click",c,!1)):null!=h&&h.attachEvent&&(h.detachEvent("onclick",c),h.attachEvent("onclick",c)),!1!==q&&q===o)break}}else{if(s[l]=b,m[l]=A,v[l]=p,"GET_VALUE"==b&&(V[l]=w[n].value),null==(h=document.getElementById(l)))try{parent.document&&(h=parent.document.getElementById(l))}catch(e){}function c(e){try{e=e.target;X({event:"setSuccess",value:1}),X(1==m[e.id]?{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event")}:{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event"),order:""}),X({event:"start",auto:e.getAttribute("admicro-data-auto"),rtg_id:N})}catch(e){console.log("ADM:",e)}return!0}function c(e){try{e=e.target;X({event:"setSuccess",value:1}),X(1==m[e.id]?{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event")}:{event:"setValue",value:"GET_VALUE"==e.getAttribute("admicro-data-event")?e.getAdmValue(e):e.getAttribute("admicro-data-event"),order:""}),X({event:"start",auto:e.getAttribute("admicro-data-auto"),rtg_id:N})}catch(e){console.log("ADM:",e)}return!0}null!=h&&(h.setAttribute("admicro-data-event",encodeURIComponent(b)),h.setAttribute("admicro-data-auto",p),h.setAttribute("admicro-data-order",A),"GET_VALUE"==b&&(h.getAdmValue=w[n].value)),null!=h&&h.addEventListener?(h.removeEventListener("click",c),h.addEventListener("click",c,!1)):null!=h&&h.attachEvent&&(h.detachEvent("onclick",c),h.attachEvent("onclick",c))}}break;case"loadextension":var U=document.createElement("script");U.setAttribute("async","true"),U.setAttribute("type","text/javascript"),U.setAttribute("src",admDomain+"/js-custom/"+J.site+".js?t="+(new Date).getTime()),X({event:"appendJs",element:U});break;case"settrackingid":cpabd_param.iid=t.id;break;case"setsuccess":cpabd_param.s=t.value;break;case"setvalue":var I=void 0!==t.targets?t.targets:null,b="function"==typeof t.value?t.value(I):t.value;"undefined"!=typeof _cpabd?(A=void 0!==t.order?t.order:(new Date).getTime()+"-"+_cpabd.getRandom(),_cpabd.setValue(encodeURIComponent(b),A)):(A=void 0!==t.order?t.order:(new Date).getTime(),cpabd_param.value=encodeURIComponent(b)+"###"+A);break;case"setstepid":cpabd_param.st=t.value;break;case"setstepvalue":"undefined"!=typeof _cpabd?_cpabd.setStepValue(encodeURIComponent(t.value)):cpabd_param.step_value=t.value;break;case"checksuccess":E=void(cpabd_param.s=0)!==t.type?t.type:0;L=document.location.pathname;for(L=1==E?document.location.href:L.split("?")[0],n=0;n<t.value.length;n++)if(0==t.value[n].regex&&L==t.value[n].path||1==t.value[n].regex&&1==t.value[n].path.test(L))return void 0!==t.value[n].success&&1!=t.value[n].success||(cpabd_param.s=1),void 0!==t.value[n].rtg_id&&(cpabd_param.rtg_id=parseInt(t.value[n].rtg_id)),1;break;case"retargeting":var D=setInterval(function(){var e;void 0!==window.ADS_CPA_CHECKER&&(e=void(e=0)===t.action_id?void 0!==cpabd_param.rtg_id?cpabd_param.rtg_id:e:parseInt(t.action_id),_cpabd.cpabd_param.rtg_id=e,_cpabd.cpabd_param.rtg_iid=t.id,_cpabd.retargetingCreate(_cpabd.cpabd_param.rtg_iid,e),clearInterval(D))},500);break;case"checkretargeting":for(L=(L=document.location.pathname).split("?")[0],n=0;n<t.value.length;n++)(0==t.value[n].regex&&L==t.value[n].path||1==t.value[n].regex&&1==t.value[n].path.test(L))&&(a=void 0!==t.value[n].rtg_id?parseInt(t.value[n].rtg_id):0,cpabd_param.rtg_id=a);break;case"analytics":case"verify":var x,j,G=void 0!==t.domain?t.domain:null;l=void 0!==t.id?t.id:null,null!=G&&null!=l&&(window.admicro_analytics_q=window.admicro_analytics_q||[],window.admicro_analytics_q.push({event:"pageviews",domain:G,id:l}),(x=document.createElement("script")).type="text/javascript",x.async=!0,x.src="//static.amcdn.vn/core/analytics.js",j=document.getElementsByTagName("script")[0],t.callback,x.onload=t.callback,x.onreadystatechange=function(){4!=x.readyState&&"complete"!=x.readyState||t.callback()},document.getElementsByTagName("head")[0].appendChild(x));break;case"setorder":var R=void 0!==t.order_id?t.order_id:(new Date).getTime();cpabd_param.value=encodeURIComponent(t.value)+"###"+R,"lazada.vn"==t.value&&(J.site="lazada.vn");break;case"appendjs":if(void 0===window.ADS_CPA_CHECKER&&t.element&&t.element.tagName)if(W.container||"script"!==t.element.tagName.toLowerCase()){if(!W.container)return 0;W.container.appendChild(t.element)}else e=document.getElementsByTagName("script")[0],t.element.setAttribute("data-owner","admicro-tag"),e.parentNode.insertBefore(t.element,e);return 1;case"startstep":var B=void 0!==t.auto?t.auto:1;try{_cpabd.step(B),J.queue=[]}catch(e){}break;case"start":B=void 0!==t.auto?t.auto:1;try{void 0!==t.rtg_id&&t.rtg_id;1==_cpabd.cpabd_param.s&&_cpabd.start(B),J.queue=[]}catch(e){}break;case"event":try{var M=void 0!==t.id?t.id:null,O=void 0!==t.value?t.value:null,B=void 0!==t.auto?t.auto:1,R=null;R="undefined"!=typeof _cpabd?void 0!==t.order_id?t.order_id:(new Date).getTime()+"-"+_cpabd.getRandom():void 0!==t.order_id?t.order_id:(new Date).getTime(),null!=M&&null!=O&&(_cpabd.cpabd_param.value=encodeURIComponent(M+":"+O)+"###"+R,_cpabd.cpabd_param.s=1,_cpabd.start(B))}catch(e){}break;case"admtracking":var F;"undefined"==typeof ADM_AdsTracking?((F=document.createElement("script")).type="text/javascript",F.async=!0,F.src="//static.amcdn.vn/core/adm_tracking.js",j=document.getElementsByTagName("script")[0],t.callback,F.onload=t.callback,F.onreadystatechange=function(){4!=F.readyState&&"complete"!=F.readyState||t.callback()},document.getElementsByTagName("head")[0].appendChild(F)):(t.callback,t.callback());break;case"pson-offers":var z;void 0===window.ADS_PSON_OFFERS_CHECKER&&((z=document.createElement("script")).type="text/javascript",z.async=!0,z.setAttribute("id","admicro-pson-offers"),z.src=admDomain+"/pson-offers/core.js?app_id="+t.app_id+"&append_body=false&t="+(new Date).getTime(),(j=document.getElementsByTagName("script")[0]).parentNode.insertBefore(z,j));break;case"map-user":var H,K=void 0!==t.id?t.id:null,P=t.source,Q=void 0===t.device?0:t.device;null!=K&&""!=K&&""!=P&&(H="//lg.logging.admicro.vn/mapid?uid="+K+"&src="+P,H+=1==Q?"&m=1":"",(a=new Image).src=H)}return 1};return J.queue=[],window.admicro_cpa_f=e,a=function(){J.bodyReady=!(W.onInitialized instanceof Function)||W.onInitialized(J,W),X({event:"admTracking",callback:e})},function t(){try{parent.document?parent.document.body?setTimeout(a,100):setTimeout(t,100):document.body?setTimeout(a,100):setTimeout(t,100)}catch(e){document.body?setTimeout(a,100):setTimeout(t,100)}}(),window.admq=X,{push:function(){for(var e=0;e<arguments.length;++e)J.queue.push(arguments[e])}}}(),window.admicro_cpa_q.push.apply(window.admicro_cpa_q,oldQueue));
