(function(){/*release_v1.1*/ window.atmDataLayer=window.atmDataLayer||[],window.atmVariables=window.atmVariables||[],0===window.atmDataLayer.length&&window.atmDataLayer.push({"atm.start":1*new Date,event:"atm.js",id:0});var listener=window.addEventListener?"addEventListener":"attachEvent",detach=window.removeEventListener?"removeEventListener":"detachEvent",atmTriggers={},atmTags={},atmTemplates={},atmCodeLoad={},atm={data:{},dataLayer:{},tagsFired:[],eventList:{},doms:[],pageView:[],pvWithRule:[],pvNoRule:[],windowLoaded:[],clickElements:[],customEvents:[],scrollElements:[],historyChanges:[],javascriptError:[],elementVisibility:[],justLink:[],timeLoad:[],variableData:{},params:[],codeLoaded:[],config:{DOCUMENT_WRITE:"useDocumentWrite",RESTART:"canBeRestarted",IS_RAN:"isRan",VERTICAL_SCROLL_DEPTH:"verticalScrollDepths",VERTICAL_PERCENT:"verticalPercentages",VERTICAL_PIXEL:"verticalPixels",HORIZONTAL_SCROLL_DEPTH:"horizontalScrollDepths",HORIZONTAL_PERCENT:"horizontalPercentages",HORIZONTAL_PIXEL:"horizontalPixels",ID:"id",CLASS:"class",TIMES:"times",PERCENT_VISIBLE:"percentVisible",ONSCREEN_DURATION:"onscreenDuration",OBSERVE_DOM_CHANGE:"observeDomChange",WAIT_FOR_TAG:"waitForTag",TIME_WAIT:"timeWait",DEFAULT:"default"},init:function(){function e(e){o&&window.clearTimeout(o),o=window.setTimeout(function(){l.checkTrigger(l.scrollElements)},100)}function t(e,t,r){"addEventListener"===listener?e.addEventListener(t,r,!1):"attachEvent"===listener&&e.attachEvent("on"+t,r)}function r(e,t,r){"removeEventListener"===detach?e.removeEventListener(t,r,!1):"detachEvent"===detach&&e.detachEvent("on"+t,r)}function a(){return g||(g=!0,u||l.checkTrigger(l.pageView,"custom"),l.atmDataLayerPush({event:"atm.domReady",time:1*new Date}),l.checkTrigger(l.doms)),r(document,"DOMContentLoaded",a),r(document,"readystatechange",n),!0}function i(){r(document,"DOMContentLoaded",a),r(window,"load",i),c||(c=!0,l.atmDataLayerPush({event:"atm.windowLoaded",time:1*new Date}),l.windowLoaded.length&&l.checkTrigger(l.windowLoaded));var t=l.scrollElements.length;if(t){for(var n=0;n<t;n++)l.checkScrollThreshold(l.scrollElements[n]);"attachEvent"!==listener?document[listener]("scroll",e):window[listener]("onscroll",e),window.scrollTo(window.scrollX,window.scrollY+1)}}function n(){"interactive"===document.readyState&&(a(),r(document,"DOMContentLoaded",a),r(document,"readystatechange",n)),"complete"===document.readyState&&(r(document,"DOMContentLoaded",a),r(window,"load",i),a(),i())}function s(e){e&&("A"===e.tagName&&e.href?"javascript:void(0)"!==e.href&&"javascript:;"!==e.href&&"javascript:void(0);"!==e.href&&(l.getElementInfo(e),l.atmDataLayerPush({event:"atm.linkClick",time:1*new Date,element:e,elementClasses:e.className,elementId:e.id,elementUrl:e.href||"",elementTarget:e.target}),l.dataLayer.event.linkClick={href:e.href,target:e.target||"_self",triggerTime:1*new Date-100},l.checkTrigger(l.justLink)):e.parentElement&&s(e.parentElement))}var o,l=this,g=!1,c=!1,u=!1;document.getElementsByTagName("body")[0]&&(this.checkTrigger(this.pageView,"custom"),u=!0),this.timeLoad.length&&this.checkTrigger(this.timeLoad),t(document,"readystatechange",n),t(document,"DOMContentLoaded",a),t(window,"load",function(){a(),i()}),"interactive"===document.readyState&&a(),"complete"===document.readyState&&(a(),i()),(this.clickElements.length||this.justLink.length)&&t(document,"mouseup",function(e){if(l.clickEvent(e),l.atmDataLayerPush({event:"atm.click",time:1*new Date,element:(e.target||e.srcElement).toString(),elementClasses:(e.target||e.srcElement).className,elementId:(e.target||e.srcElement).id,elementUrl:(e.target||e.srcElement).href||"",elementTarget:(e.target||e.srcElement).target}),l.clickElements.length&&l.checkTrigger(l.clickElements),l.justLink.length)try{return 2!==e.button&&s(e.target||e.srcElement),!0}catch(t){utis.error(t,"element",e)}}),this.historyChanges.length&&this.observeHistoryChange(this.getHistoryChange,this.historyChanges),this.javascriptError.length&&this.javascriptErrorTrigger(this.javascriptError),this.customEvents.length&&this.customEventTrigger()},atmDataLayerPush:function(e){e.id=atmDataLayer.length;var t=utis.mergeObjects({},this.variableData);atmVariables.push(t),atmDataLayer.push(e),this.dataLayerPush()},isMobile:()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),dataLayerPush:function(){this.dataLayer.attributes={pixel:10},this.dataLayer.event=this.dataLayer.event||{},this.dataLayer.event.scrollDepth=this.dataLayer.event.scrollDepth||{},this.eventList.device=this.isMobile()?"mobile":"pc",this.eventList.referer=document.referrer||"",this.eventList.pageUrl=window.location.href||"",this.eventList.pagePath=window.location.pathname||"",this.eventList.pageHostname=window.location.hostname||"",this.dataLayer[this.config.DEFAULT]=this.eventList||[],this.setVariable()},checkTagOption:function(){this.dataLayer.tagOption={};for(var e=0;e<this.tags.length;e++){this.dataLayer.tagOption[this.tags[e].id]={};for(var t=0;t<this.tags[e].option.length;t++)this.dataLayer.tagOption[this.tags[e].id][this.tags[e].option[t].key]="true"===this.tags[e].option[t].value||"false"!==this.tags[e].option[t].value&&this.tags[e].option[t].value}},runCode:function(e,t,r){var a=t;if(r){paramTemp=JSON.parse(JSON.stringify(r));var i=paramTemp.length;if(i){for(var n=0;n<i;n++)paramTemp[n].value=this.getVariable(paramTemp[n].value,paramTemp[n].type);a&&a(),paramTemp=[]}}else{var s,o=decodeURIComponent(this.getVariable(a,"TEXT"));if(document.getElementsByTagName("body")[0]){e?(s=document.createElement("div"),s.style.visibility="hidden",s.style.display="none",document.getElementsByTagName("body")[0].appendChild(s)):s=document.getElementsByTagName("body")[0];try{postscribe(s,o)}catch(e){utis.error(e,"custom",o)}}}},checkTrigger:function(e,t){var r=e.length;if(r)for(var a=0;a<r;a++)this.checkTriggerRule(e[a])&&e[a].isEnabled&&this.checkTriggerSetting(e[a],t)&&this.runTagWithTriggerId(e[a].id,t)},checkTriggerRule:function(e,t,r){var a=t?"autoSettingRule":"rule";if(e[a].length){var i=0,n=e[a],s=n.length;if(s)for(var o=0;o<s;o++)for(var l in this.variableData){var g;if(n[o].variable_name===l)try{g=this.checkRule(n[o].operator,n[o].value,this.variableData[l],n[o].variable_name),i=g?i+1:i}catch(e){var c=[n[o].operator,n[o].value,this.variableData[l],n[o].variable_name];utis.error(e,"rule",c)}}return i===n.length?(t&&(this.triggers[r].isEnabled=!0),!0):(t&&(this.triggers[r].isEnabled=!1),!1)}return t&&(this.triggers[r].isEnabled=!0),!0},checkTriggerSetting:function(e,t){var r=e.type_name;return"PAGE_VIEW"===r||"DOM_READY"===r||"WINDOW_LOADED"===r||"CLICK_ELEMENT"===r||"HISTORY_CHANGE"===r||("LINK_CLICK"===r?this.checkLinkClickSetting(e,t):"SCROLL_DEPTHS"===r?this.checkScrollDepthSetting(e):"CUSTOM_EVENT"===r?this.checkCustomEventSetting(e):"TIME_LOAD"===r&&this.checkTimeLoadSetting(e))},runTagWithTriggerId:function(e,t,r){var a=atmTriggers[e];if(a)for(var i=a.length,n=0;n<i;n++){var s=[],o=a[n],l=atmTags[o],g=r||this.dataLayer.tagOption[o],c=r||g[this.config.RESTART]||!g[this.config.RESTART]&&utis.checkIndex(this.tagsFired,o)<0;if(c)if(0!==l.templateId&&"custom"!==t){var u=atmTemplates[l.templateId].code,h=atmCodeLoad[atmTemplates[l.templateId].type_id];h(),r?this.runCode(!1,u,l.parameter):this.runCode(g[this.config.DOCUMENT_WRITE],u,l.parameter),s.push(o),this.tagsFired.push(o)}else if(0===l.templateId&&"template"!==t){u=l.code;this.runCode(g[this.config.DOCUMENT_WRITE],u),s.push(o),this.tagsFired.push(o)}s.length&&(atmDataLayer[atmDataLayer.length-1].tagID=atmDataLayer[atmDataLayer.length-1].tagID||[],atmDataLayer[atmDataLayer.length-1].tagID=atmDataLayer[atmDataLayer.length-1].tagID.concat(s))}},checkRuleFunction:{CONTAINS:function(e,t){return"string"==typeof e?e.indexOf(t)>-1:utis.checkIndex(e,t)>-1},DOES_NOT_CONTAINS:function(e,t){return"string"==typeof e?-1==e.indexOf(t):-1==utis.checkIndex(e,t)},EQUALS:function(e,t){return e==t},DOES_NOT_EQUALS:function(e,t){return e!=t},STARTS_WITH:function(e,t){return"string"==typeof e?0==e.indexOf(t):!!e.length&&e[0]==t},DOES_NOT_START_WITH:function(e,t){return"string"==typeof e?0!=e.indexOf(t):!!e.length&&e[0]!=t},ENDS_WITH:function(e,t){return"string"==typeof e?e.indexOf(t)+t.length==e.length:!!e.length&&e[e.length-1]==t},DOES_NOT_END_WITH:function(e,t){return"string"==typeof e?e.indexOf(t)+t.length!=e.length:!!e.length&&e[e.length-1]!=t},LESS_THAN:function(e,t){return e=Number(e),t=Number(t),!isNaN(e)&&!isNaN(t)&&e<t},LESS_OR_EQUAL:function(e,t){return e=Number(e),t=Number(t),!isNaN(e)&&!isNaN(t)&&e<=t},GREATER_THAN:function(e,t){return e=Number(e),t=Number(t),!isNaN(e)&&!isNaN(t)&&e>t},GREATER_OR_EQUAL:function(e,t){return e=Number(e),t=Number(t),!isNaN(e)&&!isNaN(t)&&e>=t},IS_EXISTS:function(e,t,r){if("Has Element ID"===r){var a=document.getElementById(t);return null!==a}if("Has Cookie"===r){var i=utis.getCookie(t);return void 0!==i}},MATCH_CSS_SELECTOR:function(e,t){if(!document.querySelectorAll)return!1;var r=document.querySelectorAll(t);if(ell=r.length,!ell||!e)return!1;for(var a=0;a<ell;a++)if(r[a]==e)return!0;return!1},DOES_NOT_MATCH_CSS_SELECTOR:function(e,t){if(!document.querySelectorAll)return!1;var r=document.querySelectorAll(t),a=r.length,i=0;if(!a||!e)return!1;for(var n=0;n<a;n++)r[n]==e&&i++;return!i},MATCH_REGEX:function(e,t){return t=RegExp(t,"g"),"string"==typeof e&&null!==e.match(t)},MATCH_REGEX_IGNORE_CASE:function(e,t){return t=RegExp(t,"gi"),"string"==typeof e&&null!==e.match(t)},DOES_NOT_MATCH_REGEX:function(e,t){return t=RegExp(t,"g"),"string"==typeof e&&null===e.match(t)},err:function(){return!1}},checkRule:function(e,t,r,a){return r=r||"",t=t||"","number"==typeof r&&(r=r.toString()),this.checkRuleFunction[e]&&this.checkRuleFunction[e](r,t,a)||!1},setVariableType:{STRING:function(e,t){e.variableData[e.variables[t].name]="string"==typeof e.variables[t].value?e.variables[t].value:""},DATA_LAYER:function(e,t){var r=utis.strToUni(e.variables[t].name);e.variableData[e.variables[t].name]=e.dataLayer[e.config.DEFAULT].hasOwnProperty(r)?e.dataLayer[e.config.DEFAULT][r]:""},CUSTOM_DATALAYER:function(e,t){e.variableData[e.variables[t].name]=e.getCustomDataLayer(e.variables[t].value)||""},DOM_TEXT:function(e,t){e.variableData[e.variables[t].name]=document.getElementById(e.variables[t].value)},COOKIE_VALUE:function(e,t){e.variableData[e.variables[t].name]=utis.getCookie(e.variables[t].value)||""},ARRAY:function(e,t){try{e.variableData[e.variables[t].name]=new Function("return "+e.variables[t].value)()||""}catch(r){e.variableData[e.variables[t].name]=[],utis.error(r,"variable",e.variables[t].value)}},URL_QUERY:function(e,t){e.variableData[e.variables[t].name]=utis.getUrlParam(e.variables[t].value)||""},JAVASCRIPT_VARIABLE:function(e,t){try{e.variableData[e.variables[t].name]=new Function("return "+e.variables[t].value)()||void 0}catch(r){e.variableData[e.variables[t].name]=void 0}},Datalayer:function(e,t){}},setVariable:function(){var e=this.variables.length;if(e)for(var t=0;t<e;t++)this.setVariableType[this.variables[t].type]&&this.setVariableType[this.variables[t].type](this,t)},getVariable:function(e,t){var r=e,a=[];if(""===r||null==r)return 0;if("string"==typeof r&&(a=utis.getFromBetween.get(r,"{{","}}")),0===a.length&&"TEXT"===t)return r;if(0===a.length&&"INTEGER"===t)return NaN!==parseFloat(r)?parseFloat(r):r;var i=a.length;if(i)for(var n=0;n<i;n++)"string"==typeof r&&(r=r.replace("{{"+a[n]+"}}",this.variableData[a[n]])),"object"==typeof this.variableData[a[n]]&&(r=this.variableData[a[n]]);return a=[],"TEXT"===t||"OBJECT"===t?r:"INTEGER"===t?NaN!==parseFloat(r)?parseFloat(r):r:void 0},triggerClassify:{PAGE_VIEW:function(e,t){e.triggers[t].rule.length?(e.pvWithRule.push(e.triggers[t]),e.pageView.push(e.triggers[t])):(e.pvNoRule.push(e.triggers[t].id),e.pageView.unshift(e.triggers[t]))},DOM_READY:function(e,t){e.doms.push(e.triggers[t])},WINDOW_LOADED:function(e,t){e.windowLoaded.push(e.triggers[t])},CLICK_ELEMENT:function(e,t){e.clickElements.push(e.triggers[t])},SCROLL_DEPTHS:function(e,t){e.scrollElements.push(e.triggers[t])},HISTORY_CHANGE:function(e,t){e.historyChanges.push(e.triggers[t])},JAVASCRIPT_ERROR:function(e,t){e.javascriptError.push(e.triggers[t])},ELEMENT_VISIBILITY:function(e,t){e.elementVisibility.push(e.triggers[t])},LINK_CLICK:function(e,t){e.justLink.push(e.triggers[t])},CUSTOM_EVENT:function(e,t){e.customEvents.push(e.triggers[t])},TIME_LOAD:function(e,t){e.timeLoad.push(e.triggers[t])},err:function(){}},setData:function(e){this.triggers=e.trigger,this.tags=e.tag,this.variables=e.variable,this.templates=e.template,window.previewTags=this.tags,window.triggersList=this.triggers;for(var t=this.templates.length,r=this.tags.length,a=this.triggers.length,i=Math.max(t,r,a),n=0;n<i;n++){if(n<t){var s=this.templates[n],o=s.id;atmTemplates[o]={},atmTemplates[o].code=s.code,atmTemplates[o].type_id=s.type_id,atmCodeLoad[s.type_id]=s.code_load}if(n<a&&this.triggerClassify[this.triggers[n].type_name]&&this.triggerClassify[this.triggers[n].type_name](this,n),n<r){var l=this.tags[n];o=l.id;atmTags[o]={},atmTags[o].templateId=l.template_id,atmTags[o].code=l.code,atmTags[o].parameter=l.parameter,atmTags[o].option=l.option;for(var g=l.firing.length,c=0;c<g;c++)atmTriggers[l.firing[c]]=atmTriggers[l.firing[c]]||[],2==l.template_id?atmTriggers[l.firing[c]].unshift(o):atmTriggers[l.firing[c]].push(o)}}},checkAutoSettingRule:function(){var e=this.triggers.length;if(e)for(var t=0;t<e;t++)this.checkTriggerRule(this.triggers[t],!0,t)},runTriggerPageview:function(){window.atmError=window.atmError||[],this.dataLayerPush(),this.atmDataLayerPush({event:"atm.pageView",time:1*new Date});for(var e=this.pvNoRule,t=e.length,r=0;r<t;r++)this.runTagWithTriggerId(e[r],"template",!0);this.checkAutoSettingRule(),this.checkTagOption(),this.checkTrigger(this.pvWithRule,"template")}},utis={mergeObjects:function(){for(var e={},t=0;t<arguments.length;t++)for(x in arguments[t])e[x]=arguments[t][x];return e},random:function(){return"_"+(Math.random()+1*new Date).toString(36).replace(".","")},strToUni:function(e){if(""===e||null==e)return e;var t=e;t=t.toLowerCase(),t=t.replace(/\à|\á|\ạ|\ả|\ã|\â|\ầ|\ấ|\ậ|\ẩ|\ẫ|\ă|\ằ|\ắ|\ặ|\ẳ|\ẵ/g,"a"),t=t.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),t=t.replace(/ì|í|ị|ỉ|ĩ/g,"i"),t=t.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),t=t.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),t=t.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),t=t.replace(/đ/g,"d"),t=t.replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\;|\'|\"|\&|\#|\[|\]|~|\$|_|`|-|{|}|\||\\/g," "),t=t.replace(/ + /g," "),t=t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");for(var r=t.replace(/[^a-zA-Z ]/g,"").split(" "),a=r.length,i=0;i<a;i++)r[i]=0===i?r[i].toLowerCase():r[i].charAt(0).toUpperCase()+r[i].slice(1).toLowerCase();return r.join("")},getCookie:function(e){if(document.cookie&&(e+="=",decodedCookie=document.cookie.split("; "),decodedCookie.length))for(var t=0;t<decodedCookie.length;t++){var r=decodedCookie[t].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");if(0===r.indexOf(e))return r.substring(e.length,r.length)}},getCustomDataLayer:function(str){try{var d="atm.dataLayer."+str;return eval(d)}catch(e){return void this.error(e)}},getFromBetween:{results:[],string:"",getFromBetween:function(e,t){if(this.string.indexOf(e)<0||this.string.indexOf(t)<0)return!1;var r=this.string.indexOf(e)+e.length,a=this.string.substr(0,r),i=this.string.substr(r),n=a.length+i.indexOf(t);return this.string.substring(r,n)},removeFromBetween:function(e,t){if(this.string.indexOf(e)<0||this.string.indexOf(t)<0)return!1;var r=e+this.getFromBetween(e,t)+t;this.string=this.string.replace(r,"")},getAllResults:function(e,t){if(!(this.string.indexOf(e)<0||this.string.indexOf(t)<0)){var r=this.getFromBetween(e,t);this.results.push(r),this.removeFromBetween(e,t),this.string.indexOf(e)>-1&&this.string.indexOf(t)>-1&&this.getAllResults(e,t)}},get:function(e,t,r){return this.results=[],this.string=e,null===e||""===e||void 0===e?e:(this.getAllResults(t,r),this.results)}},getSettingValue:function(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value},getUA:function(){var e,t=navigator.userAgent,r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(r[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===r[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&r.splice(1,1,e[1]),r.join(" "))},sendLog:function(e,t){},errorType:{element:function(e){return console.error("Error at clicked element"),e.target||void 0},rule:function(e){return console.error("Error at trigger's rule"),JSON.stringify(e)},variable:function(e){return console.error("Error at variables"),e},code:function(e){return console.error("Error at template code"),e.toString()},custom:function(e){return console.error("Error at custom code"),e},customevent:function(e){return console.error("Error at custom event"),JSON.stringify(e)},d:function(e){return console.error("Loi tag manager"),e}},error:function(e,t,r){this.errorType[t]?this.sendLog(e,this.errorType[t](r)):this.sendLog(e,this.errorType.d(r)),window.atmError.push({message:e.message,stack:e.stack,error:e})},checkIndex:function(e,t){if(!e.length)return-1;if(Array.prototype.indexOf)return e.indexOf(t);for(var r=e.length,a=0;a<r;a++)if(e[a]===t)return a;return-1},getUrlParam:function(e){for(var t=window.location.search.substring(1)||"",r=t.split("&"),a=r.length,i=0;i<a;i++)if(0===r[i].indexOf(e))return decodeURI(r[i].split("=")[1])||"";return null},dupArr:function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return t}},paramTemp=[],r=utis.random();window.atmRandomString=r;var getParameter=function(e,t){var r=utis.getSettingValue(paramTemp,e);return"true"===t?r?r+=".":r="":"false"===t&&(r=r||""),r};;var d = {"tag":[{"id":1042,"name":"Admicro Retareting","code":"","template_id":8,"parameter":[{"key":"retargeting_id","value":"749","type":"INTEGER"}],"option":[{"key":"canBeRestarted","value":"true","type":"BOOL"},{"key":"useDocumentWrite","value":"false","type":"BOOL"},{"key":"loadCoreAfter","value":"false","type":"BOOL"}],"dependence":[],"firing":[1251]},{"id":4478,"name":"Admicro CPA (PC \/ Mobile)","code":"\u003Cscript\u003E\r\n window.isCpaMobile = {\r\n Android: function () {\r\n if (navigator.userAgent.match(\/Android\/i) == null)\r\n return [];\r\n return navigator.userAgent.match(\/Android\/i)\r\n },\r\n BlackBerry: function () {\r\n if (navigator.userAgent.match(\/BlackBerry|BB|PlayBook\/i) == null)\r\n return [];\r\n return navigator.userAgent.match(\/BlackBerry|BB|PlayBook\/i)\r\n },\r\n iOS: function () {\r\n if (navigator.userAgent.match(\/iPhone|iPad|iPod\/i) == null)\r\n return [];\r\n return navigator.userAgent.match(\/iPhone|iPad|iPod\/i)\r\n },\r\n Opera: function () {\r\n if (navigator.userAgent.match(\/Opera Mini|Opera Mobi\/i) == null)\r\n return [];\r\n\r\n return navigator.userAgent.match(\/Opera Mini|Opera Mobi\/i)\r\n },\r\n Windows: function () {\r\n if (navigator.userAgent.match(\/Windows Phone|IEMobile\/i) == null)\r\n return [];\r\n\r\n return navigator.userAgent.match(\/Windows Phone|IEMobile\/i)\r\n },\r\n any: function () {\r\n if (this.Android().length != 0 || this.BlackBerry().length != 0 || this.iOS().length != 0 || this.Opera().length != 0 || this.Windows().length != 0)\r\n return true;\r\n else return false;\r\n },\r\n valueOS: function () {\r\n return this.Android() ? 1 : this.iOS() ? 2 : this.Windows() ? 3 : this.BlackBerry() ? 6 : \"\"\r\n }\r\n }\r\n\r\n if (window.isCpaMobile.any() === false) {\r\n \/\/ load config cpa desktop\r\n (function () {\r\n window.admicro_analytics_q = window.admicro_analytics_q || [];\r\n \/\/window.admicro_analytics_q.push({event: \"pageviews\", domain: \"tiki.vn\", id: 334});\r\n window.admicro_cpa_q = window.admicro_cpa_q || [];\r\n window.admicro_cpa_q.push(\r\n {event: \"retargeting\", id: 749},\r\n {event: \"setTrackingId\", id: 749},\r\n {event: \"onClick\"},\r\n {\r\n event: \"actions\", ids: [\r\n {\r\n className: \"btn btn-add-to-cart\",\r\n pos: false,\r\n value: function (e) {\r\n return '100112:' + JSON.stringify({\"url\": document.location.href});\r\n },\r\n order: false,\r\n auto: 1,\r\n onClick: true\r\n },\r\n {\r\n query: \".btn-add-favorite\", pos: false, value: function (e) {\r\n return '100113:' + JSON.stringify({\"url\": document.location.href});\r\n }, order: false, auto: 1\r\n },\r\n {\r\n className: \"btn-buy-installment-currency\", pos: false, value: function (e) {\r\n return '100114:' + JSON.stringify({\"url\": document.location.href});\r\n }, order: false, auto: 1\r\n },\r\n {\r\n className: \"btn-view-cart\",\r\n pos: false,\r\n value: \"100115\",\r\n order: false,\r\n auto: 1,\r\n onClick: true\r\n },\r\n {\r\n className: \"cart__submit\", pos: false, value: function (e) {\r\n var a = document.querySelectorAll('a.cart-products__name'), urls = [];\r\n for (var i = 0, len = a.length; i \u003C len; i++) {\r\n urls.push({\"url\": a[i].getAttribute('href')});\r\n }\r\n return '100116:' + JSON.stringify(urls);\r\n }, order: false, auto: 1, onClick: true\r\n },\r\n {\r\n className: \"btn saving-address\",\r\n pos: false,\r\n value: \"100117\",\r\n order: false,\r\n auto: 1,\r\n onClick: true\r\n },\r\n {\r\n className: \"order-button\", pos: false, value: function (e) {\r\n var a = document.querySelectorAll('.product a.product-name'),\r\n b = document.querySelector('.price-summary .value'),\r\n c = [], d = [];\r\n if (a.length \u003E 0) {\r\n for (var i = 0; i \u003C a.length; i++) {\r\n c.push(a[i].innerText);\r\n d.push(a[i].getAttribute('href'));\r\n }\r\n }\r\n if (b != null && c.length \u003E 0) {\r\n return '100118:' + JSON.stringify({\r\n total: b.innerText.replace(\/[^0-9]\/ig, ''),\r\n links: d,\r\n count: c.length\r\n });\r\n } else {\r\n a = document.querySelectorAll('.paymentInfo-info__bill .paymentInfo-info__text');\r\n b = document.querySelector('.paymentInfo-info__total .paymentInfo-info__price b');\r\n c = [];\r\n if (a.length \u003E 0) {\r\n for (var i = 0; i \u003C a.length; i++) {\r\n c.push(a[i].innerText);\r\n }\r\n }\r\n if (b != null && c.length \u003E 0) {\r\n return '100118:' + JSON.stringify({\r\n total: b.innerText,\r\n products: c\r\n });\r\n }\r\n }\r\n return '100118';\r\n }, order: false, auto: 1, onClick: true\r\n },\r\n {\r\n visit: [{path: \"\/checkout\/payment\/success\", type: 0, regex: false}],\r\n pos: false,\r\n value: function (e) {\r\n var getParam = function (a) {\r\n var v = '';\r\n if (a = (new RegExp('[?&]' + encodeURIComponent(a) + '=([^&]*)')).exec(location.search)) {\r\n v = decodeURIComponent(a[1]);\r\n }\r\n return v;\r\n };\r\n var a = getParam('order_code');\r\n if (a != '') {\r\n return '100119:' + JSON.stringify({\"code\": a});\r\n }\r\n return '100119';\r\n },\r\n order: true,\r\n auto: 1\r\n },\r\n {\r\n className: \"cart-products__del\", pos: false, value: function (e) {\r\n var a = e.target.parentNode.parentNode;\r\n console.log(a);\r\n var b = a.querySelector('.cart-products__name');\r\n return '100126:' + JSON.stringify({\"url\": b.getAttribute('href')});\r\n }, order: false, auto: 1, onClick: true\r\n },\r\n {\r\n query: \"a[href='https:\/\/itunes.apple.com\/vn\/app\/id958100553']\",\r\n pos: false,\r\n value: \"100127\",\r\n order: false,\r\n auto: 1\r\n },\r\n {\r\n query: \"a[href='https:\/\/play.google.com\/store\/apps\/details?id=vn.tiki.app.tikiandroid']\",\r\n pos: false,\r\n value: \"100128\",\r\n order: false,\r\n auto: 1\r\n },\r\n {\r\n id: \"valid-canceled-order\", pos: false, value: function (e) {\r\n var getParam = function (a) {\r\n var v = '';\r\n if (a = (new RegExp('[?&]' + encodeURIComponent(a) + '=([^&]*)')).exec(location.search)) {\r\n v = decodeURIComponent(a[1]);\r\n }\r\n return v;\r\n };\r\n var a = getParam('code');\r\n if (a != '') {\r\n return '100790:' + JSON.stringify({\"code\": a});\r\n }\r\n return '100790';\r\n }, order: false, auto: 1\r\n },\r\n {\r\n id: \"cancel_order_popup_submit\", pos: false, value: function (e) {\r\n var getParam = function (a) {\r\n var v = '';\r\n if (a = (new RegExp('[?&]' + encodeURIComponent(a) + '=([^&]*)')).exec(location.search)) {\r\n v = decodeURIComponent(a[1]);\r\n }\r\n return v;\r\n };\r\n var a = getParam('code');\r\n if (a != '') {\r\n return '100791:' + JSON.stringify({\"code\": a});\r\n }\r\n return '100791';\r\n }, order: false, auto: 1\r\n },\r\n {\r\n className: \"btn-save-for-later\", pos: false, value: function (e) {\r\n var a = e.getAttribute('data-sku');\r\n return '100792:' + JSON.stringify({\"sku\": a});\r\n }, order: false, auto: 1\r\n },\r\n {\r\n query: \".btn-add-to-cart.installment-payment\", pos: false, value: function (e) {\r\n return '101339:' + JSON.stringify({\"url\": document.location.href});\r\n }, order: true, auto: 1\r\n }\r\n ]\r\n }\r\n );\r\n })();\r\n } else {\r\n \/\/ load config cpa mobile\r\n (function () {\r\n window.admicro_analytics_q = window.admicro_analytics_q || [];\r\n \/\/window.admicro_analytics_q.push({event: \"pageviews\", domain: \"tiki.vn\", id: 334});\r\n window.admicro_cpa_q = window.admicro_cpa_q || [];\r\n window.admicro_cpa_q.push(\r\n {event: \"retargeting\", id: 749},\r\n {event: \"setTrackingId\", id: 749},\r\n {event: \"onClick\"},\r\n {event: \"actions\", ids: [\r\n {\r\n className: \"ProductButtonFixed__StyledProductButtonFixed-sj9kac-0 eesZEy\",\r\n pos: false,\r\n value: function (e) {\r\n return '100112:' + JSON.stringify({\"url\": document.location.href});\r\n },\r\n order: false,\r\n auto: 1,\r\n onClick: true\r\n },\r\n {\r\n query: \".btn-add-favorite\", pos: false, value: function (e) {\r\n return '100113:' + JSON.stringify({\"url\": document.location.href});\r\n }, order: false, auto: 1\r\n },\r\n {\r\n className: \"btn-buy-installment-currency\", pos: false, value: function (e) {\r\n return '100114:' + JSON.stringify({\"url\": document.location.href});\r\n }, order: false, auto: 1\r\n },\r\n {\r\n className: \"ProductButton__StyledProductButton-sc-1hhwlym-2 fNELPL\",\r\n pos: false,\r\n value: \"100115\",\r\n order: false, auto: 1, onClick: true\r\n },\r\n {\r\n className: \"product-CTA\", pos: false, value: function (e) {\r\n var a = document.querySelectorAll('.product .product-name'), urls = [];\r\n for (var i = 0, len = a.length; i \u003C len; i++) {\r\n urls.push({\"url\": a[i].getAttribute('href')});\r\n }\r\n return '100116:' + JSON.stringify(urls);\r\n }, order: false, auto: 1, onClick: true\r\n },\r\n {\r\n className: \"btn saving-address\",\r\n pos: false,\r\n value: \"100117\",\r\n order: false,\r\n auto: 1,\r\n onClick: true\r\n },\r\n {\r\n className: \"primary__btn\", pos: false, value: function (e) {\r\n var a = document.querySelectorAll('.checkout-confirm__name'),\r\n b = document.querySelector('.primary__value'),\r\n c = [], d = [];\r\n\r\n if (e.length \u003E 0) {\r\n for (var i=0; i \u003C e.length; i++) {\r\n if (e[i].innerText === 'Thanh To\u00e1n \u0110\u01a1n H\u00e0ng') {\r\n break;\r\n }\r\n }\r\n } else if (e.target.innerText !== 'Thanh To\u00e1n \u0110\u01a1n H\u00e0ng') {\r\n return false;\r\n }\r\n\r\n if (a.length \u003E 0) {\r\n for (var i = 0; i \u003C a.length; i++) {\r\n c.push(a[i].innerText);\r\n }\r\n }\r\n if (b != null && c.length \u003E 0) {\r\n return '100118:' + JSON.stringify({\r\n total: b.innerText.replace(\/[^0-9]\/ig, ''),\r\n count: c.length\r\n });\r\n }\r\n return '100118';\r\n }, order: false, auto: 1, onClick: true\r\n },\r\n {\r\n visit: [{path: \"\/checkout\/payment\/success\", type: 0, regex: false},{path: \"\/checkout\/payment\/response\", type: 0, regex: false, historyChange: true}],\r\n pos: false,\r\n value: function (e) {\r\n var getParam = function (a) {\r\n var v = '';\r\n if (a = (new RegExp('[?&]' + encodeURIComponent(a) + '=([^&]*)')).exec(location.search)) {\r\n v = decodeURIComponent(a[1]);\r\n }\r\n return v;\r\n };\r\n var a = getParam('order_code');\r\n a = (a == '') ? getParam('code') : a;\r\n if (a != '') {\r\n return '100119:' + JSON.stringify({code: a, mobile: true});\r\n }\r\n return '100119';\r\n },\r\n order: true,\r\n auto: 1\r\n },\r\n {\r\n query: \".product-del\", pos: false, value: function (e) {\r\n var a = e.closest('li').querySelector('a').getAttribute('href');\r\n return '100126:' + JSON.stringify({\"url\": a});\r\n }, order: false, auto: 1\r\n },\r\n {\r\n query: \"a[href='https:\/\/itunes.apple.com\/vn\/app\/id958100553']\",\r\n pos: false,\r\n value: \"100127\",\r\n order: false,\r\n auto: 1\r\n },\r\n {\r\n query: \"a[href='https:\/\/play.google.com\/store\/apps\/details?id=vn.tiki.app.tikiandroid']\",\r\n pos: false,\r\n value: \"100128\",\r\n order: false,\r\n auto: 1\r\n },\r\n {\r\n id: \"valid-canceled-order\", pos: false, value: function (e) {\r\n var getParam = function (a) {\r\n var v = '';\r\n if (a = (new RegExp('[?&]' + encodeURIComponent(a) + '=([^&]*)')).exec(location.search)) {\r\n v = decodeURIComponent(a[1]);\r\n }\r\n return v;\r\n };\r\n var a = getParam('code');\r\n if (a != '') {\r\n return '100790:' + JSON.stringify({\"code\": a});\r\n }\r\n return '100790';\r\n }, order: false, auto: 1\r\n },\r\n {\r\n id: \"cancel_order_popup_submit\", pos: false, value: function (e) {\r\n var getParam = function (a) {\r\n var v = '';\r\n if (a = (new RegExp('[?&]' + encodeURIComponent(a) + '=([^&]*)')).exec(location.search)) {\r\n v = decodeURIComponent(a[1]);\r\n }\r\n return v;\r\n };\r\n var a = getParam('code');\r\n if (a != '') {\r\n return '100791:' + JSON.stringify({\"code\": a});\r\n }\r\n return '100791';\r\n }, order: false, auto: 1\r\n },\r\n {\r\n className: \"btn-save-for-later\", pos: false, value: function (e) {\r\n var a = e.getAttribute('data-sku');\r\n return '100792:' + JSON.stringify({\"sku\": a});\r\n }, order: false, auto: 1\r\n },\r\n {\r\n query: \".btn-add-to-cart.installment-payment\", pos: false, value: function (e) {\r\n return '101339:' + JSON.stringify({\"url\": document.location.href});\r\n }, order: true, auto: 1\r\n }]\r\n }\r\n );\r\n })();\r\n }\r\n\u003C\/script\u003E","template_id":0,"parameter":[],"option":[{"key":"canBeRestarted","value":"true","type":"BOOL"},{"key":"useDocumentWrite","value":"false","type":"BOOL"},{"key":"loadCoreAfter","value":"false","type":"BOOL"}],"dependence":[],"firing":[1252]}],"trigger":[{"type_name":"PAGE_VIEW","id":1251,"setting":[],"autoSettingRule":[],"rule":[]},{"type_name":"DOM_READY","id":1252,"setting":[],"autoSettingRule":[],"rule":[{"operator":"DOES_NOT_CONTAINS","variable_name":"Page Path","value":"\/fwd"}]},{"type_name":"WINDOW_LOADED","id":1253,"setting":[],"autoSettingRule":[],"rule":[]},{"type_name":"DOM_READY","id":3409,"setting":[],"autoSettingRule":[],"rule":[{"operator":"STARTS_WITH","variable_name":"Page Path","value":"\/fwd"}]}],"variable":[{"name":"Params CPA","value":"[\r\n\t\t\t{query: \".btn-add-to-cart:not(.installment-payment), .product-button .ProductButtonFixed__StyledProductButtonFixed-sj9kac-0.eesZEy\", pos: false, value: function(e) {\r\nreturn '100112:' + JSON.stringify({\"url\": document.location.href});\r\n}, order: false, auto: 1},\r\n\t\t\t{query: \".btn-add-favorite\", pos: false, value: function(e) {\r\nreturn '100113:' + JSON.stringify({\"url\": document.location.href});\r\n}, order: false, auto: 1},\r\n\t\t\t{className: \"btn-buy-installment-currency\", pos: false, value: function(e) {\r\nreturn '100114:' + JSON.stringify({\"url\": document.location.href});\r\n}, order: false, auto: 1},\r\n\t\t\t{query: \"a[href='https:\/\/tiki.vn\/checkout\/cart?src=header_cart'], a[href='\/checkout\/cart'] img\", pos: false, value: \"100115\", order: false, auto: 1},\r\n\t\t\t{className: \"cart__submit\", pos: false, value: function(e) {\r\nvar a = document.querySelectorAll('a.cart-products__name'), urls = [];\r\nfor (var i=0, len=a.length; i \u003C len; i++) {\r\nurls.push({\"url\": a[i].getAttribute('href')});\r\n}\r\nreturn '100116:' + JSON.stringify(urls);\r\n}, order: false, auto: 1, onClick: true},\r\n\t\t\t{className: \"btn saving-address\", pos: false, value: \"100117\", order: false, auto: 1, onClick: true},\r\n\t\t\t{query: \".order-button button\", pos: false, value: function(e) {\r\nvar a = document.querySelectorAll('.product a.product-name'),\r\n b = document.querySelector('.price-summary .value'),\r\n c = [], d = [];\r\nif (a.length \u003E 0) {\r\n for (var i = 0; i \u003C a.length; i++) {\r\n c.push(a[i].innerText);\r\n d.push(a[i].getAttribute('href'));\r\n }\r\n}\r\nif (b != null && c.length \u003E 0) {\r\n return '100118:' + JSON.stringify({\r\n total: b.innerText.replace(\/[^0-9]\/ig, ''),\r\n links: d,\r\n count: c.length\r\n });\r\n} else {\r\n a = document.querySelectorAll('.paymentInfo-info__bill .paymentInfo-info__text');\r\n b = document.querySelector('.paymentInfo-info__total .paymentInfo-info__price b');\r\n c = [];\r\n if (a.length \u003E 0) {\r\n for (var i = 0; i \u003C a.length; i++) {\r\n c.push(a[i].innerText);\r\n }\r\n }\r\n if (b != null && c.length \u003E 0) {\r\n return '100118:' + JSON.stringify({\r\n total: b.innerText,\r\n products: c\r\n });\r\n }\r\n}\r\nreturn '100118';\r\n}, order: false, auto: 1},\r\n\t\t\t{visit: [{path: \"\/checkout\/payment\/success\", type: 0, regex: false},{path: \"\/checkout\/payment\/response\", type: 0, regex: false}], pos: false, value: function(e) {\r\nvar getParam = function(a) {\r\n var v = '';\r\n if (a = (new RegExp('[?&]' + encodeURIComponent(a) + '=([^&]*)')).exec(location.search)) {\r\n v = decodeURIComponent(a[1]);\r\n }\r\n return v;\r\n};\r\nvar a = getParam('order_code');\r\na = (a == '') ? getParam('code') : a;\r\nif (a != '') {\r\nreturn '100119:' + JSON.stringify({\"code\": a});\r\n}\r\nreturn '100119';\r\n}, order: true, auto: 1},\r\n\t\t\t{className: \"btn-item-delete\", pos: false, value: function(e) {\r\nvar a = e.getAttribute('data-sku');\r\nreturn '100126:' + JSON.stringify({\"sku\": a});\r\n}, order: false, auto: 1},\r\n\t\t\t{query: \"a[href='https:\/\/itunes.apple.com\/vn\/app\/id958100553']\", pos: false, value: \"100127\", order: false, auto: 1},\r\n\t\t\t{query: \"a[href='https:\/\/play.google.com\/store\/apps\/details?id=vn.tiki.app.tikiandroid']\", pos: false, value: \"100128\", order: false, auto: 1},\r\n\t\t\t{id: \"valid-canceled-order\", pos: false, value: function(e) {\r\nvar getParam = function(a) {\r\n var v = '';\r\n if (a = (new RegExp('[?&]' + encodeURIComponent(a) + '=([^&]*)')).exec(location.search)) {\r\n v = decodeURIComponent(a[1]);\r\n }\r\n return v;\r\n };\r\n var a = getParam('code');\r\n if (a != '') {\r\n return '100790:' + JSON.stringify({\"code\": a});\r\n }\r\n return '100790';\r\n}, order: false, auto: 1},\r\n\t\t\t{id: \"cancel_order_popup_submit\", pos: false, value: function(e) {\r\nvar getParam = function(a) {\r\n var v = '';\r\n if (a = (new RegExp('[?&]' + encodeURIComponent(a) + '=([^&]*)')).exec(location.search)) {\r\n v = decodeURIComponent(a[1]);\r\n }\r\n return v;\r\n };\r\n var a = getParam('code');\r\n if (a != '') {\r\n return '100791:' + JSON.stringify({\"code\": a});\r\n }\r\n return '100791';\r\n}, order: false, auto: 1},\r\n\t\t\t{className: \"btn-save-for-later\", pos: false, value: function(e) {\r\nvar a = e.getAttribute('data-sku');\r\nreturn '100792:' + JSON.stringify({\"sku\": a});\r\n}, order: false, auto: 1},\r\n\t\t\t{query: \".btn-add-to-cart.installment-payment\", pos: false, value: function(e) {\r\nreturn '101339:' + JSON.stringify({\"url\": document.location.href});\r\n}, order: true, auto: 1}\r\n\t\t]","type":"ARRAY"},{"name":"FWD - Params CPA","value":"[\r\n\t\t\t{className: \"fwd-lead-interest__item\", pos: false, value: function(e) {\r\nif (e.length == 0) {\r\nreturn '101133';\r\n}\r\nfor (var i=0; i \u003C e.length; i++) {\r\nif (e[i].className == 'fwd-lead-interest__item') {\r\nreturn '101133:' + JSON.stringify({href: e[i].getAttribute('href')});\r\n}\r\n}\r\n}, order: false, auto: 1, onClick: true},\r\n\t\t\t{className: \"btn-tham-gia\", pos: false, value: \"101134\", order: false, auto: 1, onClick: true},\r\n\t\t\t{className: \"btn-dang-ky\", pos: false, value: \"101135\", order: false, auto: 1, onClick: true},\r\n\t\t\t{id: \"registerBefore\", pos: false, value: \"101136\", order: false, auto: 1, onClick: true},\r\n\t\t\t{visit: [{path: \"\/fwd\/bao-hiem-ung-thu\/upload\", type: 0, regex: false}], pos: false, value: function(e) {\r\ntry {\r\nvar a = new URLSearchParams(window.location.search);\r\nvar b = a.get('order_code');\r\nif (b != '') {\r\nreturn '101146:' + JSON.stringify({orderCode: b});\r\n}\r\n} catch(e) {}\r\nreturn '101146';\r\n}, order: true, auto: 1},\r\n\t\t\t{visit: [{path: \"\/fwd\/bao-hiem-ung-thu\/success\", type: 0, regex: false}], pos: false, value: function(e) {\r\ntry {\r\n var a = new URLSearchParams(window.location.search);\r\n var b = a.get('order_code'),\r\n\t\tc = document.querySelector('.container.content .text-no .no');\r\n if (b != '' && c != null) {\r\n return '101147:' + JSON.stringify({\r\n orderCode: b,\r\n fwd: c.innerText\r\n });\r\n }\r\n} catch (e) {}\r\nreturn '101147';\r\n}, order: true, auto: 1}\r\n\t\t]","type":"ARRAY"},{"name":"Click ID","type":"DATA_LAYER"},{"name":"Has Cookie","type":"DATA_LAYER"},{"name":"Visitor Number","type":"DATA_LAYER"},{"name":"Page URL","type":"DATA_LAYER"},{"name":"Click URL","type":"DATA_LAYER"},{"name":"Click Classes","type":"DATA_LAYER"},{"name":"Click Element","type":"DATA_LAYER"},{"name":"Form Classes","type":"DATA_LAYER"},{"name":"Form Element","type":"DATA_LAYER"},{"name":"Form ID","type":"DATA_LAYER"},{"name":"Has Element ID","type":"DATA_LAYER"},{"name":"Form URL","type":"DATA_LAYER"},{"name":"Page Path","type":"DATA_LAYER"},{"name":"Page Hostname","type":"DATA_LAYER"},{"name":"Click Text","type":"DATA_LAYER"},{"name":"Referrer","type":"DATA_LAYER"},{"name":"Scroll Depth Units","type":"DATA_LAYER"}],"template":[{"name":"Tracking PageView","id":6,"type_id":4,"code":function(){window.admicro_analytics_q = window.admicro_analytics_q || []; window.admicro_analytics_q.push({event: "pageviews", domain: getParameter('domain'), id: +getParameter('domain_id')});},"code_load":function(){window['admicroAnalyticsObject']='admicro_analytics'; window['admicro_analytics']=window['admicro_analytics'] || function(){ (window['admicro_analytics_q'] = window['admicro_analytics_q'] || []).push(arguments); }; window['admicro_analytics'].t=1 * new Date(); var a = document.createElement("script"); a.type = "text/javascript"; a.async = !0; a.src = "//static.amcdn.vn/core/analytics.js"; var b = document.getElementsByTagName("script")[0]; b.parentNode.insertBefore(a, b);}},{"name":"Retargeting","id":8,"type_id":5,"code":function(){window.admicro_cpa_q = window.admicro_cpa_q || []; window.admicro_cpa_q.push({event: "retargeting", id: getParameter('retargeting_id')});},"code_load":function(){var a = [ "//static.amcdn.vn/cpa/amc-core.min.js"]; for (var i = 0; i < a.length; i++) {var b = document.createElement("script");b.type = "text/javascript"; b.async = !0; b.src = a[i]; var c = document.getElementsByTagName("script")[0]; c.parentNode.insertBefore(b, c);}}},{"name":"Action Event Tracking","id":9,"type_id":5,"code":function(){window.admicro_cpa_q = window.admicro_cpa_q || []; window.admicro_cpa_q.push( {event: "setTrackingId", id: getParameter('setTrackingId')}, {event: "onClick"}, {event: "actions", ids: getParameter('ids')} );},"code_load":function(){var a = [ "//static.amcdn.vn/cpa/amc-core.min.js"]; for (var i = 0; i < a.length; i++) {var b = document.createElement("script");b.type = "text/javascript"; b.async = !0; b.src = a[i]; var c = document.getElementsByTagName("script")[0]; c.parentNode.insertBefore(b, c);}}}]};atm.setData(d);var s=window.location.search;if(s.indexOf("atm_preview")>0){window._atm_debug_ = true;var m=new RegExp("[?&]uid=([^&#]*)").exec(s);if(document.currentScript){var d=document.currentScript.src,w=document.getElementsByTagName("script")[0],g=document.createElement("script");d=d.replace("corejs","previewjs");var u=s.indexOf("atm_debug")>0?"debug":(new Date) * 1;return d=d.replace(".js",m[1]+".js?"+u),g.src=d,g.async=!0,void w.parentNode.insertBefore(g,w)}alert("Trinh duyet khong ho tro preview")};atm.runTriggerPageview();;;;;;;;;;/* @file postscribe * @description Asynchronously write javascript, even with document.write. * @version v2.0.8 * @see {@link https://krux.github.io/postscribe} * @license MIT * @author Derek Brans * @copyright 2016 Krux Digital, Inc */ !function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["postscribe"]=e():t["postscribe"]=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={"exports":{},"id":n,"loaded":!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var o=r(1),i=n(o);t.exports=i["default"]},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(){}function a(){var t=m.shift();if(t){var e=h.last(t);e.afterDequeue(),t.stream=s.apply(void 0,t),e.afterStreamStart()}}function s(t,e,r){function n(t){t=r.beforeWrite(t),g.write(t),r.afterWrite(t)}g=new p["default"](t,r),g.id=y++,g.name=r.name||g.id,u.streams[g.name]=g;var o=t.ownerDocument,s={"close":o.close,"open":o.open,"write":o.write,"writeln":o.writeln};c(o,{"close":i,"open":i,"write":function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return n(e.join(""))},"writeln":function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return n(e.join("")+"\n")}});var l=g.win.onerror||i;return g.win.onerror=function(t,e,n){r.error({"msg":t+" - "+e+": "+n}),l.apply(g.win,[t,e,n])},g.write(e,function(){c(o,s),g.win.onerror=l,r.done(),g=null,a()}),g}function u(t,e,r){if(h.isFunction(r))r={"done":r};else if("clear"===r)return m=[],g=null,void(y=0);r=h.defaults(r,d),t=/^#/.test(t)?window.document.getElementById(t.substr(1)):t.jquery?t[0]:t;var n=[t,e,r];return t.postscribe={"cancel":function(){n.stream?n.stream.abort():n[1]=i}},r.beforeEnqueue(n),m.push(n),g||a(),t.postscribe}e.__esModule=!0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};e["default"]=u;var l=r(2),p=o(l),f=r(4),h=n(f),d={"afterAsync":i,"afterDequeue":i,"afterStreamStart":i,"afterWrite":i,"autoFix":!0,"beforeEnqueue":i,"beforeWriteToken":function(t){return t},"beforeWrite":function(t){return t},"done":i,"error":function(t){throw new Error(t.msg)},"releaseAsync":!1},y=0,m=[],g=null;c(u,{"streams":{},"queue":m,"WriteStream":p["default"]})},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var r=d+e,n=t.getAttribute(r);return f.existy(n)?String(n):n}function s(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=d+e;f.existy(r)&&""!==r?t.setAttribute(n,r):t.removeAttribute(n)}e.__esModule=!0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c=r(3),l=o(c),p=r(4),f=n(p),h=!1,d="data-ps-",y="ps-style",m="ps-script",g=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.root=e,this.options=r,this.doc=e.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new l["default"]("",{"autoFix":r.autoFix}),this.actuals=[e],this.proxyHistory="",this.proxyRoot=this.doc.createElement(e.nodeName),this.scriptStack=[],this.writeQueue=[],s(this.proxyRoot,"proxyof",0)}return t.prototype.write=function(){var t;for((t=this.writeQueue).push.apply(t,arguments);!this.deferredRemote&&this.writeQueue.length;){var e=this.writeQueue.shift();f.isFunction(e)?this._callFunction(e):this._writeImpl(e)}},t.prototype._callFunction=function(t){var e={"type":"function","value":t.name||t.toString()};this._onScriptStart(e),t.call(this.win,this.doc),this._onScriptDone(e)},t.prototype._writeImpl=function(t){this.parser.append(t);for(var e=void 0,r=void 0,n=void 0,o=[];(e=this.parser.readToken())&&!(r=f.isScript(e))&&!(n=f.isStyle(e));)e=this.options.beforeWriteToken(e),e&&o.push(e);o.length>0&&this._writeStaticTokens(o),r&&this._handleScriptToken(e),n&&this._handleStyleToken(e)},t.prototype._writeStaticTokens=function(t){var e=this._buildChunk(t);return e.actual?(e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,h&&(e.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),h&&(e.actualInnerHTML=this.root.innerHTML),e):null},t.prototype._buildChunk=function(t){for(var e=this.actuals.length,r=[],n=[],o=[],i=t.length,a=0;a<i;a++){var s=t[a],u=s.toString();if(r.push(u),s.attrs){if(!/^noscript$/i.test(s.tagName)){var c=e++;n.push(u.replace(/(\/?>)/," "+d+"id="+c+" $1")),s.attrs.id!==m&&s.attrs.id!==y&&o.push("atomicTag"===s.type?"":"<"+s.tagName+" "+d+"proxyof="+c+(s.unary?" />":">"))}}else n.push(u),o.push("endTag"===s.type?u:"")}return{"tokens":t,"raw":r.join(""),"actual":n.join(""),"proxy":o.join("")}},t.prototype._walkChunk=function(){for(var t=void 0,e=[this.proxyRoot];f.existy(t=e.shift());){var r=1===t.nodeType,n=r&&a(t,"proxyof");if(!n){r&&(this.actuals[a(t,"id")]=t,s(t,"id"));var o=t.parentNode&&a(t.parentNode,"proxyof");o&&this.actuals[o].appendChild(t)}e.unshift.apply(e,f.toArray(t.childNodes))}},t.prototype._handleScriptToken=function(t){var e=this,r=this.parser.clear();r&&this.writeQueue.unshift(r),t.src=t.attrs.src||t.attrs.SRC,t=this.options.beforeWriteToken(t),t&&(t.src&&this.scriptStack.length?this.deferredRemote=t:this._onScriptStart(t),this._writeScriptToken(t,function(){e._onScriptDone(t)}))},t.prototype._handleStyleToken=function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.type=t.attrs.type||t.attrs.TYPE||"text/css",t=this.options.beforeWriteToken(t),t&&this._writeStyleToken(t),e&&this.write()},t.prototype._writeStyleToken=function(t){var e=this._buildStyle(t);this._insertCursor(e,y),t.content&&(e.styleSheet&&!e.sheet?e.styleSheet.cssText=t.content:e.appendChild(this.doc.createTextNode(t.content)))},t.prototype._buildStyle=function(t){var e=this.doc.createElement(t.tagName);return e.setAttribute("type",t.type),f.eachKey(t.attrs,function(t,r){e.setAttribute(t,r)}),e},t.prototype._insertCursor=function(t,e){this._writeImpl('<span id="'+e+'"/>');var r=this.doc.getElementById(e);r&&r.parentNode.replaceChild(t,r)},t.prototype._onScriptStart=function(t){t.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(t)},t.prototype._onScriptDone=function(t){return t!==this.scriptStack[0]?void this.options.error({"msg":"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,t.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)))},t.prototype._writeScriptToken=function(t,e){var r=this._buildScript(t),n=this._shouldRelease(r),o=this.options.afterAsync;t.src&&(r.src=t.src,this._scriptLoadHandler(r,n?o:function(){e(),o()}));try{this._insertCursor(r,m),r.src&&!n||e()}catch(t){this.options.error(t),e()}},t.prototype._buildScript=function(t){var e=this.doc.createElement(t.tagName);return f.eachKey(t.attrs,function(t,r){e.setAttribute(t,r)}),t.content&&(e.text=t.content),e},t.prototype._scriptLoadHandler=function(t,e){function r(){t=t.onload=t.onreadystatechange=t.onerror=null}function n(){r(),null!=e&&e(),e=null}function o(t){r(),a(t),null!=e&&e(),e=null}function i(t,e){var r=t["on"+e];null!=r&&(t["_on"+e]=r)}var a=this.options.error;i(t,"load"),i(t,"error"),u(t,{"onload":function(){if(t._onload)try{t._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){o({"msg":"onload handler failed "+e+" @ "+t.src})}n()},"onerror":function(){if(t._onerror)try{t._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){return void o({"msg":"onerror handler failed "+e+" @ "+t.src})}o({"msg":"remote script failed "+t.src})},"onreadystatechange":function(){/^(loaded|complete)$/.test(t.readyState)&&n()}})},t.prototype._shouldRelease=function(t){var e=/^script$/i.test(t.nodeName);return!e||!!(this.options.releaseAsync&&t.src&&t.hasAttribute("async"))},t}();e["default"]=g},function(t,e,r){!function(e,r){t.exports=r()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={"exports":{},"id":n,"loaded":!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var o=r(1),i=n(o);t.exports=i["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=r(2),s=o(a),u=r(3),c=o(u),l=r(6),p=n(l),f=r(5),h={"comment":/^<!--/,"endTag":/^<\//,"atomicTag":/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,"startTag":/^</,"chars":/^[^<]/},d=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.stream=r;var o=!1,a={};for(var u in s)s.hasOwnProperty(u)&&(n.autoFix&&(a[u+"Fix"]=!0),o=o||a[u+"Fix"]);o?(this._readToken=(0,p["default"])(this,a,function(){return e._readTokenImpl()}),this._peekToken=(0,p["default"])(this,a,function(){return e._peekTokenImpl()})):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return t.prototype.append=function(t){this.stream+=t},t.prototype.prepend=function(t){this.stream=t+this.stream},t.prototype._readTokenImpl=function(){var t=this._peekTokenImpl();if(t)return this.stream=this.stream.slice(t.length),t},t.prototype._peekTokenImpl=function(){for(var t in h)if(h.hasOwnProperty(t)&&h[t].test(this.stream)){var e=c[t](this.stream);if(e)return"startTag"===e.type&&/script|style/i.test(e.tagName)?null:(e.text=this.stream.substr(0,e.length),e)}},t.prototype.peekToken=function(){return this._peekToken()},t.prototype.readToken=function(){return this._readToken()},t.prototype.readTokens=function(t){for(var e=void 0;e=this.readToken();)if(t[e.type]&&t[e.type](e)===!1)return},t.prototype.clear=function(){var t=this.stream;return this.stream="",t},t.prototype.rest=function(){return this.stream},t}();e["default"]=d,d.tokenToString=function(t){return t.toString()},d.escapeAttributes=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=(0,f.escapeQuotes)(t[r],null));return e},d.supports=s;for(var y in s)s.hasOwnProperty(y)&&(d.browserHasFlaw=d.browserHasFlaw||!s[y]&&y)},function(t,e){"use strict";e.__esModule=!0;var r=!1,n=!1,o=window.document.createElement("div");try{var i="<P><I></P></I>";o.innerHTML=i,e.tagSoup=r=o.innerHTML!==i}catch(t){e.tagSoup=r=!1}try{o.innerHTML="<P><i><P></P></i></P>",e.selfClose=n=2===o.childNodes.length}catch(t){e.selfClose=n=!1}o=null,e.tagSoup=r,e.selfClose=n},function(t,e,r){"use strict";function n(t){var e=t.indexOf("-->");if(e>=0)return new c.CommentToken(t.substr(4,e-1),e+3)}function o(t){var e=t.indexOf("<");return new c.CharsToken(e>=0?e:t.length)}function i(t){var e=t.indexOf(">");if(e!==-1){var r=t.match(l.startTag);if(r){var n=function(){var t={},e={},n=r[2];return r[2].replace(l.attr,function(r,o){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",e[arguments[5]]=!0):t[o]=arguments[2]||arguments[3]||arguments[4]||l.fillAttr.test(o)&&o||"":t[o]="",n=n.replace(r,"")}),{"v":new c.StartTagToken(r[1],r[0].length,t,e,(!!r[3]),n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))}}();if("object"===("undefined"==typeof n?"undefined":u(n)))return n.v}}}function a(t){var e=i(t);if(e){var r=t.slice(e.length);if(r.match(new RegExp("</\\s*"+e.tagName+"\\s*>","i"))){var n=r.match(new RegExp("([\\s\\S]*?)</\\s*"+e.tagName+"\\s*>","i"));if(n)return new c.AtomicTagToken(e.tagName,n[0].length+e.length,e.attrs,e.booleanAttrs,n[1])}}}function s(t){var e=t.match(l.endTag);if(e)return new c.EndTagToken(e[1],e[0].length)}e.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.comment=n,e.chars=o,e.startTag=i,e.atomicTag=a,e.endTag=s;var c=r(4),l={"startTag":/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,"endTag":/^<\/([\-A-Za-z0-9_]+)[^>]*>/,"attr":/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,"fillAttr":/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.EndTagToken=e.AtomicTagToken=e.StartTagToken=e.TagToken=e.CharsToken=e.CommentToken=e.Token=void 0;var o=r(5),i=(e.Token=function t(e,r){n(this,t),this.type=e,this.length=r,this.text=""},e.CommentToken=function(){function t(e,r){n(this,t),this.type="comment",this.length=r||(e?e.length:0),this.text="",this.content=e}return t.prototype.toString=function(){return"<!--"+this.content},t}(),e.CharsToken=function(){function t(e){n(this,t),this.type="chars",this.length=e,this.text=""}return t.prototype.toString=function(){return this.text},t}(),e.TagToken=function(){function t(e,r,o,i,a){n(this,t),this.type=e,this.length=o,this.text="",this.tagName=r,this.attrs=i,this.booleanAttrs=a,this.unary=!1,this.html5Unary=!1}return t.formatTag=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r="<"+t.tagName;for(var n in t.attrs)if(t.attrs.hasOwnProperty(n)){r+=" "+n;var i=t.attrs[n];"undefined"!=typeof t.booleanAttrs&&"undefined"!=typeof t.booleanAttrs[n]||(r+='="'+(0,o.escapeQuotes)(i)+'"')}return t.rest&&(r+=" "+t.rest),r+=t.unary&&!t.html5Unary?"/>":">",void 0!==e&&null!==e&&(r+=e+"</"+t.tagName+">"),r},t}());e.StartTagToken=function(){function t(e,r,o,i,a,s){n(this,t),this.type="startTag",this.length=r,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=i,this.html5Unary=!1,this.unary=a,this.rest=s}return t.prototype.toString=function(){return i.formatTag(this)},t}(),e.AtomicTagToken=function(){function t(e,r,o,i,a){n(this,t),this.type="atomicTag",this.length=r,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=i,this.unary=!1,this.html5Unary=!1,this.content=a}return t.prototype.toString=function(){return i.formatTag(this,this.content)},t}(),e.EndTagToken=function(){function t(e,r){n(this,t),this.type="endTag",this.length=r,this.text="",this.tagName=e}return t.prototype.toString=function(){return"</"+this.tagName+">"},t}()},function(t,e){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?t.replace(/([^"]*)"/g,function(t,e){return/\\/.test(e)?e+'"':e+'\\"'}):e}e.__esModule=!0,e.escapeQuotes=r},function(t,e){"use strict";function r(t){return t&&"startTag"===t.type&&(t.unary=s.test(t.tagName)||t.unary,t.html5Unary=!/\/>$/.test(t.text)),t}function n(t,e){var n=t.stream,o=r(e());return t.stream=n,o}function o(t,e){var r=e.pop();t.prepend("</"+r.tagName+">")}function i(){var t=[];return t.last=function(){return this[this.length-1]},t.lastTagNameEq=function(t){var e=this.last();return e&&e.tagName&&e.tagName.toUpperCase()===t.toUpperCase()},t.containsTagName=function(t){for(var e,r=0;e=this[r];r++)if(e.tagName===t)return!0;return!1},t}function a(t,e,a){function s(){var e=n(t,a);e&&l[e.type]&&l[e.type](e)}var c=i(),l={"startTag":function(r){var n=r.tagName;"TR"===n.toUpperCase()&&c.lastTagNameEq("TABLE")?(t.prepend("<TBODY>"),s()):e.selfCloseFix&&u.test(n)&&c.containsTagName(n)?c.lastTagNameEq(n)?o(t,c):(t.prepend("</"+r.tagName+">"),s()):r.unary||c.push(r)},"endTag":function(r){var n=c.last();n?e.tagSoupFix&&!c.lastTagNameEq(r.tagName)?o(t,c):c.pop():e.tagSoupFix&&(a(),s())}};return function(){return s(),r(a())}}e.__esModule=!0,e["default"]=a;var s=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,u=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])})},function(t,e){"use strict";function r(t){return void 0!==t&&null!==t}function n(t){return"function"==typeof t}function o(t,e,r){var n=void 0,o=t&&t.length||0;for(n=0;n<o;n++)e.call(r,t[n],n)}function i(t,e,r){for(var n in t)t.hasOwnProperty(n)&&e.call(r,n,t[n])}function a(t,e){return t=t||{},i(e,function(e,n){r(t[e])||(t[e]=n)}),t}function s(t){try{return Array.prototype.slice.call(t)}catch(r){var e=function(){var e=[];return o(t,function(t){e.push(t)}),{"v":e}}();if("object"===("undefined"==typeof e?"undefined":f(e)))return e.v}}function u(t){return t[t.length-1]}function c(t,e){return!(!t||"startTag"!==t.type&&"atomicTag"!==t.type||!("tagName"in t))&&!!~t.tagName.toLowerCase().indexOf(e)}function l(t){return c(t,"script")}function p(t){return c(t,"style")}e.__esModule=!0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.existy=r,e.isFunction=n,e.each=o,e.eachKey=i,e.defaults=a,e.toArray=s,e.last=u,e.isTag=c,e.isScript=l,e.isStyle=p}])});;window.atmEndTime=(new Date) * 1;atm.init();})();